{"ast":null,"code":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { slice } from '../ops/slice'; // TODO(annxingyuan): Use this helper in WASM Split kernel once intermediate\n// kernels have been modularized in WebGL and CPU\n// https://github.com/tensorflow/tfjs/issues/2822.\n\n/** Shared implementation of the split kernel across WebGL and CPU. */\n\nexport function split(x, sizeSplits, axis) {\n  const begin = new Array(x.rank).fill(0);\n  const size = x.shape.slice();\n  return sizeSplits.map(s => {\n    const sliceSize = [...size];\n    sliceSize[axis] = s;\n    const sliceT = slice(x, begin, sliceSize);\n    begin[axis] += s;\n    return sliceT;\n  });\n}","map":{"version":3,"sources":["../../src/backends/split_shared.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;AAiBA,SAAQ,KAAR,QAAoB,cAApB,C,CAGA;AACA;AACA;;AACA;;AACA,OAAM,SAAU,KAAV,CACF,CADE,EACI,UADJ,EAC0B,IAD1B,EACsC;AAC1C,QAAM,KAAK,GAAG,IAAI,KAAJ,CAAU,CAAC,CAAC,IAAZ,EAAkB,IAAlB,CAAuB,CAAvB,CAAd;AACA,QAAM,IAAI,GAAG,CAAC,CAAC,KAAF,CAAQ,KAAR,EAAb;AACA,SAAO,UAAU,CAAC,GAAX,CAAe,CAAC,IAAG;AACxB,UAAM,SAAS,GAAG,CAAC,GAAG,IAAJ,CAAlB;AACA,IAAA,SAAS,CAAC,IAAD,CAAT,GAAkB,CAAlB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,CAAD,EAAI,KAAJ,EAAW,SAAX,CAApB;AACA,IAAA,KAAK,CAAC,IAAD,CAAL,IAAe,CAAf;AACA,WAAO,MAAP;AACD,GANM,CAAP;AAOD","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { slice } from '../ops/slice';\n// TODO(annxingyuan): Use this helper in WASM Split kernel once intermediate\n// kernels have been modularized in WebGL and CPU\n// https://github.com/tensorflow/tfjs/issues/2822.\n/** Shared implementation of the split kernel across WebGL and CPU. */\nexport function split(x, sizeSplits, axis) {\n    const begin = new Array(x.rank).fill(0);\n    const size = x.shape.slice();\n    return sizeSplits.map(s => {\n        const sliceSize = [...size];\n        sliceSize[axis] = s;\n        const sliceT = slice(x, begin, sliceSize);\n        begin[axis] += s;\n        return sliceT;\n    });\n}\n//# sourceMappingURL=split_shared.js.map"]},"metadata":{},"sourceType":"module"}